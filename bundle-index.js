window.index=function(e){function t(t){for(var n,i,o=t[0],s=t[1],a=0,l=[];a<o.length;a++)i=o[a],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&l.push(r[i][0]),r[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(d&&d(t);l.length;)l.shift()()}var n={},r={1:0};var i={};var o={3:function(){return{}}};function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,i){n=r[e]=[t,i]}));t.push(n[2]=a);var l,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=function(e){return s.p+"bundle-"+({}[e]||e)+".js"}(e);var d=new Error;l=function(t){c.onerror=c.onload=null,clearTimeout(u);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",d.name="ChunkLoadError",d.type=i,d.request=o,n[1](d)}r[e]=void 0}};var u=setTimeout((function(){l({type:"timeout",target:c})}),12e4);c.onerror=c.onload=l,document.head.appendChild(c)}return({0:[3]}[e]||[]).forEach((function(e){var n=i[e];if(n)t.push(n);else{var r,a=o[e](),l=fetch(s.p+""+{3:"1ab8bbda5559424612b0"}[e]+".module.wasm");if(a instanceof Promise&&"function"==typeof WebAssembly.compileStreaming)r=Promise.all([WebAssembly.compileStreaming(l),a]).then((function(e){return WebAssembly.instantiate(e[0],e[1])}));else if("function"==typeof WebAssembly.instantiateStreaming)r=WebAssembly.instantiateStreaming(l,a);else{r=l.then((function(e){return e.arrayBuffer()})).then((function(e){return WebAssembly.instantiate(e,a)}))}t.push(i[e]=r.then((function(t){return s.w[e]=(t.instance||t).exports})))}})),Promise.all(t)},s.m=e,s.c=n,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e},s.w={};var a=window.webpackJsonpindex=window.webpackJsonpindex||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var d=l;return s(s.s=1)}([,function(e,t,n){"use strict";n.r(t),n.d(t,"onResize",(function(){return C})),n.d(t,"onScroll",(function(){return U})),n.d(t,"navigateToProject",(function(){return D})),n.d(t,"navigateToHome",(function(){return Y}));let r=void 0,i=void 0;(function(e,t,n,r){new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))})(void 0,void 0,void 0,(function*(){const{invertMat4x4:e,rotateMat4x4:t}=yield n.e(0).then(n.bind(null,5));r=e,i=t}));class o{constructor(){this.m=new Float64Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}clone(){const e=new o;return e.m=new Float64Array(this.m),e}data(){const e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(const t in this.m)e[t]=this.m[t];return e}invert(){void 0!==r&&r(this.m)}multiplied(e){const t=new Float64Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),n=this.m,r=e.data();t[0]=r[0]*n[0]+r[4]*n[1]+r[8]*n[2]+r[12]*n[3],t[1]=r[1]*n[0]+r[5]*n[1]+r[9]*n[2]+r[13]*n[3],t[2]=r[2]*n[0]+r[6]*n[1]+r[10]*n[2]+r[14]*n[3],t[3]=r[3]*n[0]+r[7]*n[1]+r[11]*n[2]+r[15]*n[3],t[4]=r[0]*n[4]+r[4]*n[5]+r[8]*n[6]+r[12]*n[7],t[5]=r[1]*n[4]+r[5]*n[5]+r[9]*n[6]+r[13]*n[7],t[6]=r[2]*n[4]+r[6]*n[5]+r[10]*n[6]+r[14]*n[7],t[7]=r[3]*n[4]+r[7]*n[5]+r[11]*n[6]+r[15]*n[7],t[8]=r[0]*n[8]+r[4]*n[9]+r[8]*n[10]+r[12]*n[11],t[9]=r[1]*n[8]+r[5]*n[9]+r[9]*n[10]+r[13]*n[11],t[10]=r[2]*n[8]+r[6]*n[9]+r[10]*n[10]+r[14]*n[11],t[11]=r[3]*n[8]+r[7]*n[9]+r[11]*n[10]+r[15]*n[11],t[12]=r[0]*n[12]+r[4]*n[13]+r[8]*n[14]+r[12]*n[15],t[13]=r[1]*n[12]+r[5]*n[13]+r[9]*n[14]+r[13]*n[15],t[14]=r[2]*n[12]+r[6]*n[13]+r[10]*n[14]+r[14]*n[15],t[15]=r[3]*n[12]+r[7]*n[13]+r[11]*n[14]+r[15]*n[15];const i=new o;return i.m=t,i}perspective(e,t,n,r){let i,o;t>1?(i=2*n*Math.tan(e/2),o=i*t):(o=2*n*Math.tan(e/2),i=o/t),this.m=new Float64Array([n/o,0,0,0,0,n/i,0,0,0,0,-(r+n)/(r-n),-2*r*n/(r-n),0,0,-1,0])}rotate(e,t){void 0!==i&&i(this.m,e,new Float64Array(t))}translate(e,t,n){this.m[3]+=e,this.m[7]+=t,this.m[11]+=n}transposed(){const e=this.m;return[e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15]]}}class s{constructor(e,t,n){this.vertices=new Float32Array(e),this.normals=new Float32Array(e),this.vIndices=new Uint32Array(t),this.eIndices=new Uint32Array(n),this.count=e}}class a{constructor(e){this.vertices=new Float32Array(3*e),this.normals=new Float32Array(3*e),this.vIndices=new Uint32Array(3*e)}}class l{constructor(e,t){this.vertices=new Float32Array(3*e),this.eIndices=new Uint32Array(2*t)}}class c{constructor(e,t,n,r,i,o,s){this.numIndices=0,this.programInfo=t,this.vertices=r,this.normals=i,this.buffer=this.initBuffers(e,o,s),this.mode=n,this.numIndices=o.length}initBuffers(e,t,n){const r=e.createBuffer();if(null===r)return console.log("gl.createBuffer() returned null"),null;e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.STATIC_DRAW);const i=e.createBuffer();if(null===i)return console.log("gl.createBuffer() returned null"),null;e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,this.normals,e.STATIC_DRAW);const o=new Float32Array(4*this.vertices.length/3);n(o);const s=e.createBuffer();if(null===s)return console.log("gl.createBuffer() returned null"),null;e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,o,e.STATIC_DRAW);const a=e.createBuffer();return null===a?(console.log("gl.createBuffer() returned null"),null):(e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,a),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(t),e.STATIC_DRAW),{position:r,normal:i,colour:s,indices:a})}setup(e){const t=this.programInfo;if(null===this.buffer)return void console.log("!!! model buffer === null");const n=this.buffer;{const r=3,i=e.FLOAT,o=!1,s=0,a=0;e.bindBuffer(e.ARRAY_BUFFER,n.position),e.vertexAttribPointer(t.attribLocations.vertexPosition,r,i,o,s,a),e.enableVertexAttribArray(t.attribLocations.vertexPosition)}if(null!==t.attribLocations.vertexNormal){const r=3,i=e.FLOAT,o=!1,s=0,a=0;e.bindBuffer(e.ARRAY_BUFFER,n.normal),e.vertexAttribPointer(t.attribLocations.vertexNormal,r,i,o,s,a),e.enableVertexAttribArray(t.attribLocations.vertexNormal)}{const r=4,i=e.FLOAT,o=!1,s=0,a=0;e.bindBuffer(e.ARRAY_BUFFER,n.colour),e.vertexAttribPointer(t.attribLocations.vertexColour,r,i,o,s,a),e.enableVertexAttribArray(t.attribLocations.vertexColour)}e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.indices)}draw(e,t,n,r){e.useProgram(this.programInfo.program),this.setup(e);const i=this.programInfo.uniformLocations;e.uniformMatrix4fv(i.projectionMatrix,!1,r.transposed()),null!==i.normalMatrix&&e.uniformMatrix4fv(i.normalMatrix,!1,t.data()),e.uniformMatrix4fv(i.modelViewMatrix,!1,n.transposed());e.drawElements(this.mode,this.numIndices,e.UNSIGNED_SHORT,0)}}class d{constructor(e){this.projectionMatrix=new o,this.models=new Array,this.viewMatrix=new o,this.gl=e,this.setup()}addModel(e){e.setup(this.gl),this.models.push(e)}clear(){this.models.length=0}setup(){const e=this.gl;e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.clearColor(.2,.2,.2,1),e.clearDepth(1),e.enable(e.DEPTH_TEST),e.enable(e.BLEND);const t=30*Math.PI/180,n=e.canvas,r=n.clientWidth/n.clientHeight;this.projectionMatrix=new o,this.projectionMatrix.perspective(t,r,.125,20)}reset(){this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.setup()}setView(e){this.viewMatrix=e}draw(){const e=this.gl;e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);for(let e=0,t=this.models.length;e<t;e++)this.models[e].draw(this.gl,this.viewMatrix,this.projectionMatrix)}}var u=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};const h=new class{constructor(){this.renderModels=new Array,this.modelMatrix=new o}addRenderModel(e){this.renderModels.push(e)}setMatrix(e){this.modelMatrix=e}setup(e){for(let t=0,n=this.renderModels.length;t<n;t++)this.renderModels[t].setup(e)}draw(e,t,n){const r=t.multiplied(this.modelMatrix),i=r.clone();i.invert();for(let t=0,o=this.renderModels.length;t<o;t++)this.renderModels[t].draw(e,i,r,n)}},f=new class{constructor(){this.renderModels=new Array,this.sceneMatrix=new o,this.modelMatrix=new o,this.wall=null,this.sceneMatrix.translate(0,0,2.5)}recalculate(e,t){if(null===this.wall)return;const n=(1-Math.cos(t))/2,r=.2,i=6*r*Math.sqrt(2),o=n*Math.atan(i)/Math.atan(6*r);for(let e=0;e<9;e++){const t=(e-4)*r,n=t*t;for(let i=0;i<13;i++){const s=(i-6)*r,a=Math.sqrt(s*s+n),l=Math.cos(Math.atan(a)*o);this.wall.vertices[3*(13*e+i)+0]=s*l,this.wall.vertices[3*(13*e+i)+1]=t*l}}null!==this.wall&&null!==this.wall.buffer&&(e.bindBuffer(e.ARRAY_BUFFER,this.wall.buffer.position),e.bufferData(e.ARRAY_BUFFER,this.wall.vertices,e.STATIC_DRAW))}setMatrix(e){this.modelMatrix=e}setup(e){for(let t=0,n=this.renderModels.length;t<n;t++)this.renderModels[t].setup(e)}draw(e,t,n){var r;const i=t.multiplied(this.sceneMatrix).multiplied(this.modelMatrix),o=i.clone();o.invert(),null===(r=this.wall)||void 0===r||r.draw(e,o,i,n)}},v=new class{constructor(){this.renderModels=new Array,this.sceneMatrix=new o,this.modelMatrix=new o,this.manhole=null,this.podFaces=null,this.podEdges=null,this.tripodFaces=null,this.tripodEdges=null,this.laser=null,this.lights=null,this.sceneMatrix.translate(0,0,2.5)}setMatrix(e){this.modelMatrix=e}setup(e){for(let t=0,n=this.renderModels.length;t<n;t++)this.renderModels[t].setup(e)}draw(e,t,n){var r,i,o,s,a,l,c;const d=t.multiplied(this.sceneMatrix),u=d.multiplied(this.modelMatrix),h=u.clone();h.invert(),null===(r=this.manhole)||void 0===r||r.draw(e,h,d,n),null===(i=this.tripodFaces)||void 0===i||i.draw(e,h,d,n),null===(o=this.tripodEdges)||void 0===o||o.draw(e,h,d,n),null===(s=this.podFaces)||void 0===s||s.draw(e,h,u,n),null===(a=this.podEdges)||void 0===a||a.draw(e,h,u,n),null===(l=this.laser)||void 0===l||l.draw(e,h,u,n),null===(c=this.lights)||void 0===c||c.draw(e,h,u,n)}},m=new class{constructor(){this.renderModels=new Array,this.viewMatrix=new o,this.modelMatrix=new o,this.pipe=null,this.floatFaces=null,this.floatEdges=null,this.laser=null,this.sonar=null}setModel(e){const t=new o;t.translate(0,-.4,0),this.modelMatrix=e.multiplied(t)}setView(e){this.viewMatrix=e}setup(e){for(let t=0,n=this.renderModels.length;t<n;t++)this.renderModels[t].setup(e)}draw(e,t,n){var r,i,o,s,a;const l=t.multiplied(this.viewMatrix),c=l.multiplied(this.modelMatrix),d=c.clone();d.invert(),null===(r=this.pipe)||void 0===r||r.draw(e,d,l,n),null===(i=this.floatFaces)||void 0===i||i.draw(e,d,c,n),null===(o=this.floatEdges)||void 0===o||o.draw(e,d,c,n),null===(s=this.laser)||void 0===s||s.draw(e,d,c,n),null===(a=this.sonar)||void 0===a||a.draw(e,d,c,n)}};let w,g=0;const p=["title","work-history","project-selection","tech-tools","education","interests","brag"],M={title:[0,0],"work-history":[0,0],"project-selection":[0,0],"tech-tools":[0,0],education:[0,0],interests:[0,0],brag:[0,0]};let I="";function A(e){for(let t=0;t<4*e.length;t+=4)e[t+0]=.0625,e[t+1]=.0625,e[t+2]=.0625,e[t+3]=1}function x(e){for(let t=0;t<4*e.length;t+=4)e[t+0]=.25,e[t+1]=.25,e[t+2]=.25,e[t+3]=1}function b(e){for(let t=0;t<e.length;t+=4)e[t+0]=1,e[t+1]=.125,e[t+2]=.125,e[t+3]=1}function y(e){for(let t=0;t<e.length;t+=4)e[t+0]=.125,e[t+1]=.125,e[t+2]=1,e[t+3]=1}function F(e){for(let t=0;t<e.length;t+=4)e[t+0]=.5,e[t+1]=.5,e[t+2]=.5,e[t+3]=1}function E(e){for(let t=0;t<4*e.length;t+=4)e[t+0]=.25,e[t+1]=.25,e[t+2]=.25,e[t+3]=.2}function L(e,t,n){const r=e.createShader(t);if(null===r)return console.log("gl.createShader("+t+") returned null"),null;const i=r;return e.shaderSource(i,n),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS)?i:(console.log("An error occurred compiling the shaders: "+e.getShaderInfoLog(i)),e.deleteShader(i),null)}function R(e,t,n){let r=L(e,e.VERTEX_SHADER,t);if(null===r)return console.log("loadShader(vertex) returned null"),null;const i=r;if(r=L(e,e.FRAGMENT_SHADER,n),null===r)return console.log("loadShader(fragment) returned null"),null;const o=r;if(r=e.createProgram(),null===r)return console.log("gl.createProgram() returned null"),null;const s=r;return e.attachShader(s,i),e.attachShader(s,o),e.linkProgram(s),e.getProgramParameter(s,e.LINK_STATUS)?s:(console.log("Unable to initialize the shader program: "+e.getProgramInfoLog(s)),null)}function P(e){let t=(e-g)/1e3;t=Math.min(t,1),t=(1-Math.cos(t*Math.PI))/2;const n=new o;n.rotate(t*Math.PI,[0,1,0]),null==w||w.setView(n),null==w||w.draw(),e-g>1e3||requestAnimationFrame(P)}function S(e){let t=(e-g)/1e3;t=1-Math.min(t,1),t=(1-Math.cos(t*Math.PI))/2;const n=new o;if(n.rotate(t*Math.PI,[0,1,0]),w.setView(n),w.draw(),e-g>1e3)return w.clear(),void w.addModel(h);requestAnimationFrame(S)}function B(){void 0!==w&&w.draw()}function _(){const e=.5*Math.PI*window.pageYOffset/window.innerHeight,t=new o;switch(t.rotate(e,[0,1,0]),t.translate(0,e/25-1.6,-.45),h.setMatrix(t),I){case"sv100":{const t=new o;t.rotate((e-4.93125)/12.5,[0,1,0]),t.translate(0,.789-e/6.25,0),v.setMatrix(t);break}case"fisheye-calibration":f.recalculate(w.gl,e);break;case"supermd":{const t=new o,n=new o;t.translate(.67*e,0,0),t.rotate((2.5*e-22.5)*Math.PI/180,[1,0,0]),t.rotate(e/8,[0,1,0]),t.translate(0,0,12+e/2),n.translate(0,0,2-e),m.setView(t),m.setModel(n);break}}}function T(){!function(){const e=window.scrollY,t=window.scrollY+window.innerHeight;for(let n=0;n<p.length;n++){const r=p[n],i=M[r],o=i[0],s=i[0]+i[1];if(t>o&&e<s){const n=(t-o)/window.innerHeight,i=(s-e)/window.innerHeight,a=document.getElementById(r);if(null===a){console.log("!!! Element with id",r,"is null");continue}a.style.opacity=0<n&&n<.333?(n/.333).toString():0<i&&i<.333?(i/.333).toString():"1"}}}(),_()}function N(){void 0!==w&&(w.gl.canvas.width=window.innerWidth,w.gl.canvas.height=window.innerHeight,w.reset(),requestAnimationFrame(T),requestAnimationFrame(B))}function C(){!function(){const e=[];for(let t=0;t<p.length;t++){const n=p[t],r=document.getElementById(n);null!==r?(r.style.transform="",e.push(r)):console.log("el is null",n)}for(let t=0;t<e.length;t++){const n=p[t],r=e[t];M[n][0]=window.pageYOffset+r.getBoundingClientRect().top,M[n][1]=r.offsetHeight}}(),N()}const V=(e,t,r)=>u(void 0,void 0,void 0,(function*(){const{parseSTL:i,parseSTLMesh:o}=yield n.e(0).then(n.bind(null,5));fetch("human.stl").then(n=>{n.arrayBuffer().then(n=>{const i=new Uint8Array(n),a=new s(2796,5580,5580),l=performance.now(),d=o(i,a.vertices,a.normals,a.vIndices,a.eIndices),u=performance.now();console.log(u-l,"milliseconds (Human)"),console.log("ParseSTLMesh:",d);const f=new c(e,t,e.TRIANGLES,a.vertices,a.normals,a.vIndices,A),v=new c(e,r,e.LINES,a.vertices,a.normals,a.eIndices,x);h.addRenderModel(f),h.addRenderModel(v),w.addModel(h),requestAnimationFrame(_),requestAnimationFrame(B);document.getElementById("gl_canvas").style.opacity="1"})}),fetch("sv100.stl").then(n=>{n.arrayBuffer().then(n=>{const o=new Uint8Array(n),d=new s(384,228,256),u=performance.now(),h=i(o,d.vertices,d.normals,d.vIndices,d.eIndices),f=performance.now();console.log(f-u,"milliseconds (SV100)"),console.log("parseSTL:",h);const m=new l(24,24),w=new l(40,40),g=new a(16);!function(e,t,n){{const t=.5,n=16;for(let r=0;r<n;r++){const i=3*r,o=r*(2*Math.PI/n);e.vertices.set([Math.sin(o)*t,.21,Math.cos(o)*t],i),e.eIndices[2*r+0]=r,e.eIndices[2*r+1]=r+1}e.eIndices[2*n-1]=0;const r=8,i=.025;for(let t=n;t<n+r;t++){const o=3*t,s=(t-n)*(2*Math.PI/r);e.vertices.set([Math.sin(s)*i,.21,Math.cos(s)*i],o),e.eIndices[2*t+0]=t,e.eIndices[2*t+1]=t+1}e.eIndices[2*(n+r)-1]=n}{const e=.5,n=.6,r=9;for(let i=0;i<r;i++){const o=3*i,s=i*(Math.PI/(r-1))-Math.PI/2;t.vertices[o+0*r*3+0]=Math.sin(s)*e,t.vertices[o+0*r*3+1]=1,t.vertices[o+0*r*3+2]=Math.cos(s)*e,t.vertices[o+1*r*3+0]=Math.sin(s)*n,t.vertices[o+1*r*3+1]=1,t.vertices[o+1*r*3+2]=Math.cos(s)*n,t.vertices[o+2*r*3+0]=Math.sin(s)*e,t.vertices[o+2*r*3+1]=-1,t.vertices[o+2*r*3+2]=Math.cos(s)*e,t.vertices[o+3*r*3+0]=Math.sin(s)*n,t.vertices[o+3*r*3+1]=-1,t.vertices[o+3*r*3+2]=Math.cos(s)*n,t.eIndices[2*i+0]=i,t.eIndices[2*i+1]=i+1,t.eIndices[2*(i+r)+0]=i+r,t.eIndices[2*(i+r)+1]=i+r+1,t.eIndices[2*(i+2*r)+0]=i+2*r,t.eIndices[2*(i+2*r)+1]=i+2*r+1,t.eIndices[2*(i+3*r)+0]=i+3*r,t.eIndices[2*(i+3*r)+1]=i+3*r+1}t.eIndices[1*r*2-1]=2*r-1,t.eIndices[2*r*2-1]=4*r-1,t.eIndices[3*r*2-1]=1*r-1,t.eIndices[4*r*2-1]=3*r-1;let i=4*r*2;t.eIndices[i++]=0,t.eIndices[i++]=r,t.eIndices[i++]=r,t.eIndices[i++]=3*r,t.eIndices[i++]=3*r,t.eIndices[i++]=2*r,t.eIndices[i++]=2*r,t.eIndices[i++]=0*r}{const e=.125,t=.5,r=.05,i=.25;n.vertices.set([e,r,r,e,r,-r,e,-r,-r,e,-r,r,t,i,i,t,i,-i,t,-i,-i,t,-i,i,-e,r,r,-e,r,-r,-e,-r,-r,-e,-r,r,-t,i,i,-t,i,-i,-t,-i,-i,-t,-i,i],0),n.normals.set([-.5,0,-.5,-.5,0,-.5,-.5,.5,0,-.5,.5,0,-.5,0,.5,-.5,0,.5,-.5,-.5,0,-.5,-.5,0,-.5,0,-.5,-.5,0,-.5,-.5,.5,0,-.5,.5,0,-.5,0,.5,-.5,0,.5,-.5,-.5,0,-.5,-.5,0],0);const o=8,s=24;for(let e=0;e<2;e++){const t=e*s,r=e*o;n.vIndices[0+t]=3+r,n.vIndices[1+t]=0+r,n.vIndices[2+t]=7+r,n.vIndices[3+t]=0+r,n.vIndices[4+t]=4+r,n.vIndices[5+t]=7+r,n.vIndices[6+t]=0+r,n.vIndices[7+t]=1+r,n.vIndices[8+t]=4+r,n.vIndices[9+t]=1+r,n.vIndices[10+t]=5+r,n.vIndices[11+t]=4+r,n.vIndices[12+t]=2+r,n.vIndices[13+t]=3+r,n.vIndices[14+t]=6+r,n.vIndices[15+t]=3+r,n.vIndices[16+t]=7+r,n.vIndices[17+t]=6+r,n.vIndices[18+t]=1+r,n.vIndices[19+t]=2+r,n.vIndices[20+t]=5+r,n.vIndices[21+t]=2+r,n.vIndices[22+t]=6+r,n.vIndices[23+t]=5+r}}}(m,w,g);const p=new c(e,t,e.TRIANGLES,d.vertices,d.normals,d.vIndices,A),M=new c(e,r,e.LINES,d.vertices,d.normals,d.eIndices,x),I=new c(e,r,e.LINES,m.vertices,new Float32Array,m.eIndices,b),y=new c(e,r,e.LINES,w.vertices,new Float32Array,w.eIndices,F),L=new c(e,t,e.TRIANGLES,g.vertices,g.normals,g.vIndices,E);v.podFaces=p,v.podEdges=M,v.laser=I,v.manhole=y,v.lights=L})}),fetch("supermd.stl").then(n=>{n.arrayBuffer().then(n=>{const o=new Uint8Array(n),a=new s(3765,2232,2520),d=performance.now(),u=i(o,a.vertices,a.normals,a.vIndices,a.eIndices),h=performance.now();console.log(h-d,"milliseconds (SuperMD)"),console.log("parseSTL:",u);const f=function(){const e=new l(18,17),t=16;for(let n=0;n<=9;n++){const r=3*n,i=(n-.5)*(2*Math.PI/t);e.vertices.set([1.5*Math.cos(i),1.5*Math.sin(i)+.4,-.65],r),e.eIndices[2*n+0]=n,e.eIndices[2*n+1]=n+1}for(let t=10;t<18;t++){const n=3*t,r=t*(2*Math.PI/8);e.vertices.set([.046875*Math.cos(r),.046875*Math.sin(r)+.4,-.65],n),e.eIndices[2*t+0]=t,e.eIndices[2*t+1]=t+1}return e.eIndices[18]=17,e.eIndices[19]=10,e}(),v=function(){const e=new l(8,7),t=16;for(let n=0;n<=7;n++){const r=3*n,i=(n+.5)*(2*Math.PI/t);e.vertices.set([1.5*Math.cos(i),-1.5*Math.sin(i)+.4,-.65],r),e.eIndices[2*n+0]=n,e.eIndices[2*n+1]=n+1}e.eIndices[18]=1;for(let n=t;n<24;n++)e.eIndices[2*n+0]=n,e.eIndices[2*n+1]=n+1;return e.eIndices[47]=t,e}(),w=function(){const e=new l(144,160);for(let t=0;t<2;t++){const n=72*t,r=160*t,i=6*t-6;for(let t=0;t<9;t++){const o=3*t,s=t*(Math.PI/8)-Math.PI/2,a=1.5*-Math.cos(s),l=1.5*Math.sin(s),c=2*-Math.cos(s),d=2*Math.sin(s),u=2.5*-Math.cos(s),h=2.5*Math.sin(s);e.vertices.set([a,l,i+6],o+0+3*n),e.vertices.set([c,d,i+6],o+27+3*n),e.vertices.set([a,l,i+0],o+54+3*n),e.vertices.set([c,d,i+.8],o+81+3*n),e.vertices.set([c,d,i+0],o+108+3*n),e.vertices.set([u,h,i+0],o+135+3*n),e.vertices.set([u,h,i-.5],o+162+3*n),e.vertices.set([c,d,i-.5],o+189+3*n);for(let i=0;i<8;i++)e.eIndices[2*(t+9*i)+0+r]=t+9*i+n,e.eIndices[2*(t+9*i)+1+r]=t+9*i+1+n}e.eIndices[18+r-1]=18+n-1,e.eIndices[36+r-1]=36+n-1,e.eIndices[54+r-1]=9+n-1,e.eIndices[72+r-1]=54+n-1,e.eIndices[90+r-1]=27+n-1,e.eIndices[108+r-1]=63+n-1,e.eIndices[126+r-1]=72+n-1,e.eIndices[144+r-1]=45+n-1;const o=144+r;e.eIndices.set([0+n,9+n],o+0),e.eIndices.set([9+n,27+n],o+2),e.eIndices.set([18+n,36+n],o+4),e.eIndices.set([0+n,18+n],o+6),e.eIndices.set([27+n,45+n],o+8),e.eIndices.set([45+n,54+n],o+10),e.eIndices.set([54+n,63+n],o+12),e.eIndices.set([63+n,36+n],o+14)}return e}(),g=new c(e,t,e.TRIANGLES,a.vertices,a.normals,a.vIndices,A),p=new c(e,r,e.LINES,a.vertices,a.normals,a.eIndices,x),M=new c(e,r,e.LINES,f.vertices,new Float32Array,f.eIndices,b),I=new c(e,r,e.LINES,v.vertices,new Float32Array,v.eIndices,y),E=new c(e,r,e.LINES,w.vertices,new Float32Array,w.eIndices,F);m.floatFaces=g,m.floatEdges=p,m.laser=M,m.sonar=I,m.pipe=E})});const d=new a(117);!function(e,t,n){for(let n=0;n<9;n++)for(let r=0;r<13;r++)e[3*(13*n+r)+2]=0,t[3*(13*n+r)+0]=-.5,t[3*(13*n+r)+1]=.5,t[3*(13*n+r)+2]=-1;const r=new Uint32Array(288);let i=0;for(let e=0;e<8;e++)for(let t=0;t<12;t++)e%2==0&&t%2==1||e%2==1&&t%2==0||(r[i++]=13*e+t+0,r[i++]=13*e+t+13,r[i++]=13*e+t+1,r[i++]=13*e+t+1,r[i++]=13*e+t+14,r[i++]=13*e+t+13);n.set(r,0)}(d.vertices,d.normals,d.vIndices);const u=new c(e,t,e.TRIANGLES,d.vertices,d.normals,d.vIndices,F);f.wall=u}));function U(){requestAnimationFrame(T),requestAnimationFrame(B)}function j(e){const t=document.getElementById("content");if(null===t)return void console.log("!!! el === null");t.classList.add("leftscreen");const n=document.getElementById(e);if(null!==n){switch(n.classList.add("focused"),e){case"sv100":null==w||w.addModel(v),I=e;break;case"fisheye-calibration":null==w||w.addModel(f),f.recalculate(w.gl,.5*Math.PI*window.pageYOffset/window.innerHeight),I=e;break;case"supermd":null==w||w.addModel(m),I=e}""!==I&&(requestAnimationFrame(_),g=performance.now(),requestAnimationFrame(P)),window.scrollTo({top:M["project-selection"][0],behavior:"smooth"})}else console.log("!!! projectDiv === null")}function O(){const e=document.getElementById("projects");if(null!==e){const t=e.children.length;for(let n=0;n<t;n++){const t=e.children[n];"project-selection"!==t.id&&t.classList.remove("focused")}}else console.log("!!! projectDiv === null");const t=document.getElementById("content");null!==t?t.classList.remove("leftscreen"):console.log("!!! el === null"),w.setView(new o),g=performance.now(),""!==I&&requestAnimationFrame(S),I=""}function D(e){window.history.pushState({},"","#"+e),j(e)}function Y(){window.history.pushState({},"","/"),O()}window.onpopstate=function(e){e.preventDefault(),""!==document.location.hash?j(document.location.hash.substr(1)):O()},"scrollRestoration"in window.history&&(history.scrollRestoration="manual"),window.onload=()=>{C(),""!==document.location.hash&&j(document.location.hash.substr(1))},window.onresize=C,function(){const e=document.getElementById("gl_canvas");e.width=window.innerWidth,e.height=window.innerHeight;const t=e.getContext("webgl",{});if(null===t)return void console.log("Unable to initialise WebGL");const n=t,r=R(n,"\nattribute vec4 aVertexPosition;\nattribute vec3 aVertexNormal;\nattribute vec4 aVertexColour;\n\nuniform mat4 uNormalMatrix;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying lowp vec4 vColour;\nvarying highp vec3 vLighting;\n\nvoid main() {\n\tgl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\n\tvColour = aVertexColour;\n\n\t// Apply lighting effect\n\thighp vec3 ambientLight = vec3(0.1, 0.1, 0.1);\n\thighp vec3 directionalLightColor = vec3(1, 1, 1);\n\thighp vec3 directionalVector = normalize(vec3(0.85, 0.8, 0.75));\n\n\thighp vec4 transformedNormal = uNormalMatrix * vec4(aVertexNormal, 1.0);\n\n\thighp float directional = max(dot(transformedNormal.xyz, directionalVector), 0.0);\n\tvLighting = ambientLight + (directionalLightColor * directional);\n}\n","\nvarying lowp vec4 vColour;\nvarying highp vec3 vLighting;\n\nvoid main() {\n\tgl_FragColor = vec4(vColour.rgb * vLighting, vColour.a);\n\t// gl_FragColor = vColour;\n}\n");if(null===r)return void console.log("iniShaderProgram() returned null");const i=r,o={program:i,attribLocations:{vertexPosition:n.getAttribLocation(i,"aVertexPosition"),vertexNormal:n.getAttribLocation(i,"aVertexNormal"),vertexColour:n.getAttribLocation(i,"aVertexColour")},uniformLocations:{projectionMatrix:n.getUniformLocation(i,"uProjectionMatrix"),modelViewMatrix:n.getUniformLocation(i,"uModelViewMatrix"),normalMatrix:n.getUniformLocation(i,"uNormalMatrix")}},s=R(n,"\nattribute vec4 aVertexPosition;\n// attribute vec3 aVertexNormal;\nattribute vec4 aVertexColour;\n\n// uniform mat4 uNormalMatrix;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying lowp vec4 vColour;\n// varying highp vec3 vLighting;\n\nvoid main() {\n\tgl_Position = (uProjectionMatrix * uModelViewMatrix * aVertexPosition) - vec4(0.0, 0.0, 0.00048828125, 0.0);\n\tvColour = aVertexColour;\n}\n","\nvarying lowp vec4 vColour;\n// varying highp vec3 vLighting;\n\nvoid main() {\n\tgl_FragColor = vColour;\n}\n");if(null===s)return void console.log("iniShaderProgram() returned null");const a=s,l={program:a,attribLocations:{vertexPosition:n.getAttribLocation(a,"aVertexPosition"),vertexNormal:null,vertexColour:n.getAttribLocation(a,"aVertexColour")},uniformLocations:{projectionMatrix:n.getUniformLocation(a,"uProjectionMatrix"),modelViewMatrix:n.getUniformLocation(a,"uModelViewMatrix"),normalMatrix:null}};w=new d(n),V(n,o,l),N()}()}]);