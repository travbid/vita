(()=>{"use strict";var e,t,n,r,i,o,s={},a={};function l(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={id:e,loaded:!1,exports:{}};return s[e](n,n.exports,l),n.loaded=!0,n.exports}l.m=s,e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",r=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},l.a=(i,o,s)=>{var a;s&&((a=[]).d=-1);var l,c,d,u=new Set,h=i.exports,f=new Promise(((e,t)=>{d=t,c=e}));f[t]=h,f[e]=e=>(a&&e(a),u.forEach(e),f.catch((e=>{}))),i.exports=f,o((i=>{var o;l=(i=>i.map((i=>{if(null!==i&&"object"==typeof i){if(i[e])return i;if(i.then){var o=[];o.d=0,i.then((e=>{s[t]=e,r(o)}),(e=>{s[n]=e,r(o)}));var s={};return s[e]=e=>e(o),s}}var a={};return a[e]=e=>{},a[t]=i,a})))(i);var s=()=>l.map((e=>{if(e[n])throw e[n];return e[t]})),c=new Promise((t=>{(o=()=>t(s)).r=0;var n=e=>e!==a&&!u.has(e)&&(u.add(e),e&&!e.d&&(o.r++,e.push(o)));l.map((t=>t[e](n)))}));return o.r?c:s()}),(e=>(e?d(f[n]=e):c(h),r(a)))),a&&a.d<0&&(a.d=0)},l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce(((t,n)=>(l.f[n](e,t),t)),[])),l.u=e=>"bundle-"+e+".js",l.miniCssF=e=>{},l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i={},o="index:",l.l=(e,t,n,r)=>{if(i[e])i[e].push(t);else{var s,a;if(void 0!==n)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==o+n){s=u;break}}s||(a=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,l.nc&&s.setAttribute("nonce",l.nc),s.setAttribute("data-webpack",o+n),s.src=e),i[e]=[t];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(f);var r=i[e];if(delete i[e],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((e=>e(n))),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),a&&document.head.appendChild(s)}},l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.v=(e,t,n,r)=>{var i=fetch(l.p+""+n+".module.wasm"),o=()=>i.then((e=>e.arrayBuffer())).then((e=>WebAssembly.instantiate(e,r))).then((t=>Object.assign(e,t.instance.exports)));return i.then((t=>"function"==typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(t,r).then((t=>Object.assign(e,t.instance.exports)),(e=>{if("application/wasm"!==t.headers.get("Content-Type"))return console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",e),o();throw e})):o()))},(()=>{var e;l.g.importScripts&&(e=l.g.location+"");var t=l.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),l.p=e})(),(()=>{var e={57:0};l.f.j=(t,n)=>{var r=l.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise(((n,i)=>r=e[t]=[n,i]));n.push(r[2]=i);var o=l.p+l.u(t),s=new Error;l.l(o,(n=>{if(l.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,r[1](s)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,i,[o,s,a]=n,c=0;if(o.some((t=>0!==e[t]))){for(r in s)l.o(s,r)&&(l.m[r]=s[r]);if(a)a(l)}for(t&&t(n);c<o.length;c++)i=o[c],l.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunkindex=self.webpackChunkindex||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var c={};let d,u;l.r(c),l.d(c,{navigateToHome:()=>K,navigateToProject:()=>$,onResize:()=>Y,onScroll:()=>W});(function(e,t,n,r){new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))})(void 0,void 0,void 0,(function*(){const{invertMat4x4:e,rotateMat4x4:t}=yield l.e(701).then(l.bind(l,701));d=e,u=t}));class h{constructor(){this.m=new Float64Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}clone(){const e=new h;return e.m=new Float64Array(this.m),e}data(){const e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(const t in this.m)e[t]=this.m[t];return e}invert(){void 0!==d&&d(this.m)}multiplied(e){const t=new Float64Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),n=this.m,r=e.data();t[0]=r[0]*n[0]+r[4]*n[1]+r[8]*n[2]+r[12]*n[3],t[1]=r[1]*n[0]+r[5]*n[1]+r[9]*n[2]+r[13]*n[3],t[2]=r[2]*n[0]+r[6]*n[1]+r[10]*n[2]+r[14]*n[3],t[3]=r[3]*n[0]+r[7]*n[1]+r[11]*n[2]+r[15]*n[3],t[4]=r[0]*n[4]+r[4]*n[5]+r[8]*n[6]+r[12]*n[7],t[5]=r[1]*n[4]+r[5]*n[5]+r[9]*n[6]+r[13]*n[7],t[6]=r[2]*n[4]+r[6]*n[5]+r[10]*n[6]+r[14]*n[7],t[7]=r[3]*n[4]+r[7]*n[5]+r[11]*n[6]+r[15]*n[7],t[8]=r[0]*n[8]+r[4]*n[9]+r[8]*n[10]+r[12]*n[11],t[9]=r[1]*n[8]+r[5]*n[9]+r[9]*n[10]+r[13]*n[11],t[10]=r[2]*n[8]+r[6]*n[9]+r[10]*n[10]+r[14]*n[11],t[11]=r[3]*n[8]+r[7]*n[9]+r[11]*n[10]+r[15]*n[11],t[12]=r[0]*n[12]+r[4]*n[13]+r[8]*n[14]+r[12]*n[15],t[13]=r[1]*n[12]+r[5]*n[13]+r[9]*n[14]+r[13]*n[15],t[14]=r[2]*n[12]+r[6]*n[13]+r[10]*n[14]+r[14]*n[15],t[15]=r[3]*n[12]+r[7]*n[13]+r[11]*n[14]+r[15]*n[15];const i=new h;return i.m=t,i}perspective(e,t,n,r){let i,o;t>1?(i=2*n*Math.tan(e/2),o=i*t):(o=2*n*Math.tan(e/2),i=o/t),this.m=new Float64Array([n/o,0,0,0,0,n/i,0,0,0,0,-(r+n)/(r-n),-2*r*n/(r-n),0,0,-1,0])}rotate(e,t){void 0!==u&&u(this.m,e,new Float64Array(t))}translate(e,t,n){this.m[3]+=e,this.m[7]+=t,this.m[11]+=n}transposed(){const e=this.m;return[e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15]]}}class f{constructor(e,t,n){this.vertices=new Float32Array(e),this.normals=new Float32Array(e),this.vIndices=new Uint32Array(t),this.eIndices=new Uint32Array(n),this.count=e}}class v{constructor(e){this.vertices=new Float32Array(3*e),this.normals=new Float32Array(3*e),this.vIndices=new Uint32Array(3*e)}}class m{constructor(e,t){this.vertices=new Float32Array(3*e),this.eIndices=new Uint32Array(2*t)}}class w{constructor(e,t,n,r,i,o,s){this.numIndices=0,this.programInfo=t,this.vertices=r,this.normals=i,this.buffer=this.initBuffers(e,o,s),this.mode=n,this.numIndices=o.length}initBuffers(e,t,n){const r=e.createBuffer();if(null===r)return console.log("gl.createBuffer() returned null"),null;e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.STATIC_DRAW);const i=e.createBuffer();if(null===i)return console.log("gl.createBuffer() returned null"),null;e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,this.normals,e.STATIC_DRAW);const o=new Float32Array(4*this.vertices.length/3);n(o);const s=e.createBuffer();if(null===s)return console.log("gl.createBuffer() returned null"),null;e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,o,e.STATIC_DRAW);const a=e.createBuffer();return null===a?(console.log("gl.createBuffer() returned null"),null):(e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,a),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(t),e.STATIC_DRAW),{position:r,normal:i,colour:s,indices:a})}setup(e){const t=this.programInfo;if(null===this.buffer)return void console.log("!!! model buffer === null");const n=this.buffer;{const r=3,i=e.FLOAT,o=!1,s=0,a=0;e.bindBuffer(e.ARRAY_BUFFER,n.position),e.vertexAttribPointer(t.attribLocations.vertexPosition,r,i,o,s,a),e.enableVertexAttribArray(t.attribLocations.vertexPosition)}if(null!==t.attribLocations.vertexNormal){const r=3,i=e.FLOAT,o=!1,s=0,a=0;e.bindBuffer(e.ARRAY_BUFFER,n.normal),e.vertexAttribPointer(t.attribLocations.vertexNormal,r,i,o,s,a),e.enableVertexAttribArray(t.attribLocations.vertexNormal)}{const r=4,i=e.FLOAT,o=!1,s=0,a=0;e.bindBuffer(e.ARRAY_BUFFER,n.colour),e.vertexAttribPointer(t.attribLocations.vertexColour,r,i,o,s,a),e.enableVertexAttribArray(t.attribLocations.vertexColour)}e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.indices)}draw(e,t,n,r){e.useProgram(this.programInfo.program),this.setup(e);const i=this.programInfo.uniformLocations;e.uniformMatrix4fv(i.projectionMatrix,!1,r.transposed()),null!==i.normalMatrix&&e.uniformMatrix4fv(i.normalMatrix,!1,t.data()),e.uniformMatrix4fv(i.modelViewMatrix,!1,n.transposed());e.drawElements(this.mode,this.numIndices,e.UNSIGNED_SHORT,0)}}class g{constructor(e){this.projectionMatrix=new h,this.models=new Array,this.viewMatrix=new h,this.gl=e,this.setup()}addModel(e){e.setup(this.gl),this.models.push(e)}clear(){this.models.length=0}setup(){const e=this.gl;e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.clearColor(.2,.2,.2,1),e.clearDepth(1),e.enable(e.DEPTH_TEST),e.enable(e.BLEND);const t=30*Math.PI/180,n=e.canvas,r=n.clientWidth/n.clientHeight;this.projectionMatrix=new h,this.projectionMatrix.perspective(t,r,.125,20)}reset(){this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.setup()}setView(e){this.viewMatrix=e}draw(){const e=this.gl;e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);for(let e=0,t=this.models.length;e<t;e++)this.models[e].draw(this.gl,this.viewMatrix,this.projectionMatrix)}}var p=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};const M=new class{constructor(){this.renderModels=new Array,this.modelMatrix=new h}addRenderModel(e){this.renderModels.push(e)}setMatrix(e){this.modelMatrix=e}setup(e){for(let t=0,n=this.renderModels.length;t<n;t++)this.renderModels[t].setup(e)}draw(e,t,n){const r=t.multiplied(this.modelMatrix),i=r.clone();i.invert();for(let t=0,o=this.renderModels.length;t<o;t++)this.renderModels[t].draw(e,i,r,n)}},I=new class{constructor(){this.renderModels=new Array,this.sceneMatrix=new h,this.modelMatrix=new h,this.wall=null,this.sceneMatrix.translate(0,0,2.5)}recalculate(e,t){if(null===this.wall)return;const n=(1-Math.cos(t))/2,r=.2,i=6*r*Math.sqrt(2),o=n*Math.atan(i)/Math.atan(6*r);for(let e=0;e<9;e++){const t=(e-4)*r,n=t*t;for(let i=0;i<13;i++){const s=(i-6)*r,a=Math.sqrt(s*s+n),l=Math.cos(Math.atan(a)*o);this.wall.vertices[3*(13*e+i)+0]=s*l,this.wall.vertices[3*(13*e+i)+1]=t*l}}null!==this.wall&&null!==this.wall.buffer&&(e.bindBuffer(e.ARRAY_BUFFER,this.wall.buffer.position),e.bufferData(e.ARRAY_BUFFER,this.wall.vertices,e.STATIC_DRAW))}setMatrix(e){this.modelMatrix=e}setup(e){for(let t=0,n=this.renderModels.length;t<n;t++)this.renderModels[t].setup(e)}draw(e,t,n){var r;const i=t.multiplied(this.sceneMatrix).multiplied(this.modelMatrix),o=i.clone();o.invert(),null===(r=this.wall)||void 0===r||r.draw(e,o,i,n)}},b=new class{constructor(){this.renderModels=new Array,this.sceneMatrix=new h,this.modelMatrix=new h,this.manhole=null,this.podFaces=null,this.podEdges=null,this.tripodFaces=null,this.tripodEdges=null,this.laser=null,this.lights=null,this.sceneMatrix.translate(0,0,2.5)}setMatrix(e){this.modelMatrix=e}setup(e){for(let t=0,n=this.renderModels.length;t<n;t++)this.renderModels[t].setup(e)}draw(e,t,n){var r,i,o,s,a,l,c;const d=t.multiplied(this.sceneMatrix),u=d.multiplied(this.modelMatrix),h=u.clone();h.invert(),null===(r=this.manhole)||void 0===r||r.draw(e,h,d,n),null===(i=this.tripodFaces)||void 0===i||i.draw(e,h,d,n),null===(o=this.tripodEdges)||void 0===o||o.draw(e,h,d,n),null===(s=this.podFaces)||void 0===s||s.draw(e,h,u,n),null===(a=this.podEdges)||void 0===a||a.draw(e,h,u,n),null===(l=this.laser)||void 0===l||l.draw(e,h,u,n),null===(c=this.lights)||void 0===c||c.draw(e,h,u,n)}},x=new class{constructor(){this.renderModels=new Array,this.viewMatrix=new h,this.modelMatrix=new h,this.pipe=null,this.floatFaces=null,this.floatEdges=null,this.laser=null,this.sonar=null}setModel(e){const t=new h;t.translate(0,-.4,0),this.modelMatrix=e.multiplied(t)}setView(e){this.viewMatrix=e}setup(e){for(let t=0,n=this.renderModels.length;t<n;t++)this.renderModels[t].setup(e)}draw(e,t,n){var r,i,o,s,a;const l=t.multiplied(this.viewMatrix),c=l.multiplied(this.modelMatrix),d=c.clone();d.invert(),null===(r=this.pipe)||void 0===r||r.draw(e,d,l,n),null===(i=this.floatFaces)||void 0===i||i.draw(e,d,c,n),null===(o=this.floatEdges)||void 0===o||o.draw(e,d,c,n),null===(s=this.laser)||void 0===s||s.draw(e,d,c,n),null===(a=this.sonar)||void 0===a||a.draw(e,d,c,n)}};let A,y=0;var E;!function(e){e.title="title",e.workHistory="work-history",e.projectSelection="project-selection",e.techTools="tech-tools",e.education="education"}(E||(E={}));const F={[E.title]:[0,0],[E.workHistory]:[0,0],[E.projectSelection]:[0,0],[E.techTools]:[0,0],[E.education]:[0,0]};let S="";function L(e){for(let t=0;t<4*e.length;t+=4)e[t+0]=.5,e[t+1]=.9,e[t+2]=1,e[t+3]=1}function R(e){for(let t=0;t<4*e.length;t+=4)e[t+0]=.0625,e[t+1]=.0625,e[t+2]=.0625,e[t+3]=1}function P(e){for(let t=0;t<4*e.length;t+=4)e[t+0]=.35,e[t+1]=.35,e[t+2]=.35,e[t+3]=1}function _(e){for(let t=0;t<e.length;t+=4)e[t+0]=1,e[t+1]=.125,e[t+2]=.125,e[t+3]=1}function B(e){for(let t=0;t<e.length;t+=4)e[t+0]=.125,e[t+1]=.125,e[t+2]=1,e[t+3]=1}function T(e){for(let t=0;t<e.length;t+=4)e[t+0]=.5,e[t+1]=.5,e[t+2]=.5,e[t+3]=1}function C(e){for(let t=0;t<4*e.length;t+=4)e[t+0]=.25,e[t+1]=.25,e[t+2]=.25,e[t+3]=.2}function N(e,t,n){const r=e.createShader(t);if(null===r)return console.log("gl.createShader("+t+") returned null"),null;const i=r;return e.shaderSource(i,n),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS)?i:(console.log("An error occurred compiling the shaders: "+e.getShaderInfoLog(i)),e.deleteShader(i),null)}function j(e,t,n){let r=N(e,e.VERTEX_SHADER,t);if(null===r)return console.log("loadShader(vertex) returned null"),null;const i=r;if(r=N(e,e.FRAGMENT_SHADER,n),null===r)return console.log("loadShader(fragment) returned null"),null;const o=r;if(r=e.createProgram(),null===r)return console.log("gl.createProgram() returned null"),null;const s=r;return e.attachShader(s,i),e.attachShader(s,o),e.linkProgram(s),e.getProgramParameter(s,e.LINK_STATUS)?s:(console.log("Unable to initialize the shader program: "+e.getProgramInfoLog(s)),null)}function V(e){let t=(e-y)/1e3;t=Math.min(t,1),t=(1-Math.cos(t*Math.PI))/2;const n=new h;n.rotate(t*Math.PI,[0,1,0]),null==A||A.setView(n),null==A||A.draw(),e-y>1e3||requestAnimationFrame(V)}function U(e){let t=(e-y)/1e3;t=1-Math.min(t,1),t=(1-Math.cos(t*Math.PI))/2;const n=new h;if(n.rotate(t*Math.PI,[0,1,0]),A.setView(n),A.draw(),e-y>1e3)return A.clear(),void A.addModel(M);requestAnimationFrame(U)}function k(){void 0!==A&&A.draw()}function O(){const e=.5*Math.PI*window.pageYOffset/window.innerHeight,t=new h;switch(t.rotate(e,[0,1,0]),t.translate(0,e/25-1.6,-.45),M.setMatrix(t),S){case"sv100":{const t=new h;t.rotate((e-4.93125)/12.5,[0,1,0]),t.translate(0,.789-e/6.25,0),b.setMatrix(t);break}case"fisheye-calibration":I.recalculate(A.gl,e);break;case"supermd":{const t=new h,n=new h;t.translate(.67*e,0,0),t.rotate((2.5*e-22.5)*Math.PI/180,[1,0,0]),t.rotate(e/8,[0,1,0]),t.translate(0,0,12+e/2),n.translate(0,0,2-e),x.setView(t),x.setModel(n);break}}}function D(){!function(){const e=window.scrollY,t=window.scrollY+window.innerHeight;for(const[n,r]of Object.entries(F)){const i=r[0],o=r[0]+r[1];if(t>i&&e<o){const r=(t-i)/window.innerHeight,s=(o-e)/window.innerHeight,a=document.getElementById(n);if(null===a){console.log("!!! Element with id",n,"is null");continue}a.style.opacity=0<r&&r<.333?(r/.333).toString():0<s&&s<.333?(s/.333).toString():"1"}}}(),O()}function H(){void 0!==A&&(A.gl.canvas.width=window.innerWidth,A.gl.canvas.height=window.innerHeight,A.reset(),requestAnimationFrame(D),requestAnimationFrame(k))}function Y(){!function(){const e={};for(const t in F){const n=document.getElementById(t);null!==n?(n.style.transform="",e[t]=n):console.log("el is null",t)}for(const[t,n]of Object.entries(F)){const r=e[t];n[0]=window.scrollY+r.getBoundingClientRect().top,n[1]=r.offsetHeight}}(),H()}const q=(e,t,n)=>p(void 0,void 0,void 0,(function*(){const{parseSTL:r,parseSTLMesh:i}=yield l.e(701).then(l.bind(l,701));fetch("human.stl").then((r=>{r.arrayBuffer().then((r=>{const o=new Uint8Array(r),s=new f(2796,5580,5580),a=performance.now(),l=i(o,s.vertices,s.normals,s.vIndices,s.eIndices),c=performance.now();console.log(c-a,"milliseconds (Human)"),console.log("ParseSTLMesh:",l);const d=new w(e,t,e.TRIANGLES,s.vertices,s.normals,s.vIndices,L),u=new w(e,n,e.LINES,s.vertices,s.normals,s.eIndices,P);M.addRenderModel(d),M.addRenderModel(u),A.addModel(M),requestAnimationFrame(O),requestAnimationFrame(k);document.getElementById("gl_canvas").style.opacity="1"}))})),fetch("sv100.stl").then((i=>{i.arrayBuffer().then((i=>{const o=new Uint8Array(i),s=new f(384,228,256),a=performance.now(),l=r(o,s.vertices,s.normals,s.vIndices,s.eIndices),c=performance.now();console.log(c-a,"milliseconds (SV100)"),console.log("parseSTL:",l);const d=new m(24,24),u=new m(40,40),h=new v(16);!function(e,t,n){{const t=.5,n=16;for(let r=0;r<n;r++){const i=3*r,o=r*(2*Math.PI/n);e.vertices.set([Math.sin(o)*t,.21,Math.cos(o)*t],i),e.eIndices[2*r+0]=r,e.eIndices[2*r+1]=r+1}e.eIndices[2*n-1]=0;const r=8,i=.025;for(let t=n;t<n+r;t++){const o=3*t,s=(t-n)*(2*Math.PI/r);e.vertices.set([Math.sin(s)*i,.21,Math.cos(s)*i],o),e.eIndices[2*t+0]=t,e.eIndices[2*t+1]=t+1}e.eIndices[2*(n+r)-1]=n}{const e=.5,n=.6,r=9;for(let i=0;i<r;i++){const o=3*i,s=i*(Math.PI/(r-1))-Math.PI/2;t.vertices[o+0*r*3+0]=Math.sin(s)*e,t.vertices[o+0*r*3+1]=1,t.vertices[o+0*r*3+2]=Math.cos(s)*e,t.vertices[o+1*r*3+0]=Math.sin(s)*n,t.vertices[o+1*r*3+1]=1,t.vertices[o+1*r*3+2]=Math.cos(s)*n,t.vertices[o+2*r*3+0]=Math.sin(s)*e,t.vertices[o+2*r*3+1]=-1,t.vertices[o+2*r*3+2]=Math.cos(s)*e,t.vertices[o+3*r*3+0]=Math.sin(s)*n,t.vertices[o+3*r*3+1]=-1,t.vertices[o+3*r*3+2]=Math.cos(s)*n,t.eIndices[2*i+0]=i,t.eIndices[2*i+1]=i+1,t.eIndices[2*(i+r)+0]=i+r,t.eIndices[2*(i+r)+1]=i+r+1,t.eIndices[2*(i+2*r)+0]=i+2*r,t.eIndices[2*(i+2*r)+1]=i+2*r+1,t.eIndices[2*(i+3*r)+0]=i+3*r,t.eIndices[2*(i+3*r)+1]=i+3*r+1}t.eIndices[1*r*2-1]=2*r-1,t.eIndices[2*r*2-1]=4*r-1,t.eIndices[3*r*2-1]=1*r-1,t.eIndices[4*r*2-1]=3*r-1;let i=4*r*2;t.eIndices[i++]=0,t.eIndices[i++]=r,t.eIndices[i++]=r,t.eIndices[i++]=3*r,t.eIndices[i++]=3*r,t.eIndices[i++]=2*r,t.eIndices[i++]=2*r,t.eIndices[i++]=0*r}{const e=.125,t=.5,r=.05,i=.25;n.vertices.set([e,r,r,e,r,-r,e,-r,-r,e,-r,r,t,i,i,t,i,-i,t,-i,-i,t,-i,i,-e,r,r,-e,r,-r,-e,-r,-r,-e,-r,r,-t,i,i,-t,i,-i,-t,-i,-i,-t,-i,i],0),n.normals.set([-.5,0,-.5,-.5,0,-.5,-.5,.5,0,-.5,.5,0,-.5,0,.5,-.5,0,.5,-.5,-.5,0,-.5,-.5,0,-.5,0,-.5,-.5,0,-.5,-.5,.5,0,-.5,.5,0,-.5,0,.5,-.5,0,.5,-.5,-.5,0,-.5,-.5,0],0);const o=8,s=24;for(let e=0;e<2;e++){const t=e*s,r=e*o;n.vIndices[0+t]=3+r,n.vIndices[1+t]=0+r,n.vIndices[2+t]=7+r,n.vIndices[3+t]=0+r,n.vIndices[4+t]=4+r,n.vIndices[5+t]=7+r,n.vIndices[6+t]=0+r,n.vIndices[7+t]=1+r,n.vIndices[8+t]=4+r,n.vIndices[9+t]=1+r,n.vIndices[10+t]=5+r,n.vIndices[11+t]=4+r,n.vIndices[12+t]=2+r,n.vIndices[13+t]=3+r,n.vIndices[14+t]=6+r,n.vIndices[15+t]=3+r,n.vIndices[16+t]=7+r,n.vIndices[17+t]=6+r,n.vIndices[18+t]=1+r,n.vIndices[19+t]=2+r,n.vIndices[20+t]=5+r,n.vIndices[21+t]=2+r,n.vIndices[22+t]=6+r,n.vIndices[23+t]=5+r}}}(d,u,h);const g=new w(e,t,e.TRIANGLES,s.vertices,s.normals,s.vIndices,R),p=new w(e,n,e.LINES,s.vertices,s.normals,s.eIndices,P),M=new w(e,n,e.LINES,d.vertices,new Float32Array,d.eIndices,_),I=new w(e,n,e.LINES,u.vertices,new Float32Array,u.eIndices,T),x=new w(e,t,e.TRIANGLES,h.vertices,h.normals,h.vIndices,C);b.podFaces=g,b.podEdges=p,b.laser=M,b.manhole=I,b.lights=x}))})),fetch("supermd.stl").then((i=>{i.arrayBuffer().then((i=>{const o=new Uint8Array(i),s=new f(3765,2232,2520),a=performance.now(),l=r(o,s.vertices,s.normals,s.vIndices,s.eIndices),c=performance.now();console.log(c-a,"milliseconds (SuperMD)"),console.log("parseSTL:",l);const d=function(){const e=new m(18,17),t=16;for(let n=0;n<=9;n++){const r=3*n,i=(n-.5)*(2*Math.PI/t);e.vertices.set([1.5*Math.cos(i),1.5*Math.sin(i)+.4,-.65],r),e.eIndices[2*n+0]=n,e.eIndices[2*n+1]=n+1}const n=.046875;for(let t=10;t<18;t++){const r=3*t,i=t*(2*Math.PI/8);e.vertices.set([Math.cos(i)*n,Math.sin(i)*n+.4,-.65],r),e.eIndices[2*t+0]=t,e.eIndices[2*t+1]=t+1}return e.eIndices[18]=17,e.eIndices[19]=10,e}(),u=function(){const e=new m(8,7),t=16;for(let n=0;n<=7;n++){const r=3*n,i=(n+.5)*(2*Math.PI/t);e.vertices.set([1.5*Math.cos(i),-1.5*Math.sin(i)+.4,-.65],r),e.eIndices[2*n+0]=n,e.eIndices[2*n+1]=n+1}e.eIndices[18]=1;for(let n=t;n<24;n++)e.eIndices[2*n+0]=n,e.eIndices[2*n+1]=n+1;return e.eIndices[47]=t,e}(),h=function(){const e=new m(144,160),t=1.5;for(let n=0;n<2;n++){const r=72*n,i=160*n,o=6*n-6;for(let n=0;n<9;n++){const s=3*n,a=n*(Math.PI/8)-Math.PI/2,l=-Math.cos(a)*t,c=Math.sin(a)*t,d=2*-Math.cos(a),u=2*Math.sin(a),h=2.5*-Math.cos(a),f=2.5*Math.sin(a);e.vertices.set([l,c,o+6],s+0+3*r),e.vertices.set([d,u,o+6],s+27+3*r),e.vertices.set([l,c,o+0],s+54+3*r),e.vertices.set([d,u,o+.8],s+81+3*r),e.vertices.set([d,u,o+0],s+108+3*r),e.vertices.set([h,f,o+0],s+135+3*r),e.vertices.set([h,f,o-.5],s+162+3*r),e.vertices.set([d,u,o-.5],s+189+3*r);for(let t=0;t<8;t++)e.eIndices[2*(n+9*t)+0+i]=n+9*t+r,e.eIndices[2*(n+9*t)+1+i]=n+9*t+1+r}e.eIndices[18+i-1]=18+r-1,e.eIndices[36+i-1]=36+r-1,e.eIndices[54+i-1]=9+r-1,e.eIndices[72+i-1]=54+r-1,e.eIndices[90+i-1]=27+r-1,e.eIndices[108+i-1]=63+r-1,e.eIndices[126+i-1]=72+r-1,e.eIndices[144+i-1]=45+r-1;const s=144+i;e.eIndices.set([0+r,9+r],s+0),e.eIndices.set([9+r,27+r],s+2),e.eIndices.set([18+r,36+r],s+4),e.eIndices.set([0+r,18+r],s+6),e.eIndices.set([27+r,45+r],s+8),e.eIndices.set([45+r,54+r],s+10),e.eIndices.set([54+r,63+r],s+12),e.eIndices.set([63+r,36+r],s+14)}return e}(),v=new w(e,t,e.TRIANGLES,s.vertices,s.normals,s.vIndices,R),g=new w(e,n,e.LINES,s.vertices,s.normals,s.eIndices,P),p=new w(e,n,e.LINES,d.vertices,new Float32Array,d.eIndices,_),M=new w(e,n,e.LINES,u.vertices,new Float32Array,u.eIndices,B),I=new w(e,n,e.LINES,h.vertices,new Float32Array,h.eIndices,T);x.floatFaces=v,x.floatEdges=g,x.laser=p,x.sonar=M,x.pipe=I}))}));const o=new v(117);!function(e,t,n){for(let n=0;n<9;n++)for(let r=0;r<13;r++)e[3*(13*n+r)+2]=0,t[3*(13*n+r)+0]=-.5,t[3*(13*n+r)+1]=.5,t[3*(13*n+r)+2]=-1;const r=new Uint32Array(288);let i=0;for(let e=0;e<8;e++)for(let t=0;t<12;t++)e%2==0&&t%2==1||e%2==1&&t%2==0||(r[i++]=13*e+t+0,r[i++]=13*e+t+13,r[i++]=13*e+t+1,r[i++]=13*e+t+1,r[i++]=13*e+t+14,r[i++]=13*e+t+13);n.set(r,0)}(o.vertices,o.normals,o.vIndices);const s=new w(e,t,e.TRIANGLES,o.vertices,o.normals,o.vIndices,T);I.wall=s}));function W(){requestAnimationFrame(D),requestAnimationFrame(k)}function G(e){const t=document.getElementById("content");if(null===t)return void console.log("!!! el === null");t.classList.add("leftscreen");const n=document.getElementById(e);if(null!==n){switch(n.classList.add("focused"),e){case"sv100":null==A||A.addModel(b),S=e;break;case"fisheye-calibration":null==A||A.addModel(I),I.recalculate(A.gl,.5*Math.PI*window.pageYOffset/window.innerHeight),S=e;break;case"supermd":null==A||A.addModel(x),S=e}""!==S&&(requestAnimationFrame(O),y=performance.now(),requestAnimationFrame(V)),window.scrollTo({top:F[E.projectSelection][0],behavior:"smooth"})}else console.log("!!! projectDiv === null")}function z(){const e=document.getElementById("projects");if(null!==e){const t=e.children.length;for(let n=0;n<t;n++){const t=e.children[n];"project-selection"!==t.id&&t.classList.remove("focused")}}else console.log("!!! projectDiv === null");const t=document.getElementById("content");null!==t?t.classList.remove("leftscreen"):console.log("!!! el === null"),A.setView(new h),y=performance.now(),""!==S&&requestAnimationFrame(U),S=""}function $(e){window.history.pushState({},"","#"+e),G(e)}function K(){window.history.pushState({},"","/"),z()}window.onpopstate=function(e){e.preventDefault(),""!==document.location.hash?G(document.location.hash.substr(1)):z()},"scrollRestoration"in window.history&&(history.scrollRestoration="manual"),window.onload=()=>{Y(),""!==document.location.hash&&G(document.location.hash.substr(1))},window.onresize=Y,function(){const e=document.getElementById("gl_canvas");e.width=window.innerWidth,e.height=window.innerHeight;const t=e.getContext("webgl",{});if(null===t)return void console.log("Unable to initialise WebGL");const n=t,r=j(n,"\nattribute vec4 aVertexPosition;\nattribute vec3 aVertexNormal;\nattribute vec4 aVertexColour;\n\nuniform mat4 uNormalMatrix;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying lowp vec4 vColour;\nvarying highp vec3 vLighting;\n\nvoid main() {\n\tgl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\n\tvColour = aVertexColour;\n\n\t// Apply lighting effect\n\thighp vec3 ambientLight = vec3(0.1, 0.1, 0.1);\n\thighp vec3 directionalLightColor = vec3(1, 1, 1);\n\thighp vec3 directionalVector = normalize(vec3(0.85, 0.8, 0.75));\n\n\thighp vec4 transformedNormal = uNormalMatrix * vec4(aVertexNormal, 1.0);\n\n\thighp float directional = max(dot(transformedNormal.xyz, directionalVector), 0.0);\n\tvLighting = ambientLight + (directionalLightColor * directional);\n}\n","\nvarying lowp vec4 vColour;\nvarying highp vec3 vLighting;\n\nvoid main() {\n\tgl_FragColor = vec4(vColour.rgb * vLighting, vColour.a);\n\t// gl_FragColor = vColour;\n}\n");if(null===r)return void console.log("iniShaderProgram() returned null");const i=r,o={program:i,attribLocations:{vertexPosition:n.getAttribLocation(i,"aVertexPosition"),vertexNormal:n.getAttribLocation(i,"aVertexNormal"),vertexColour:n.getAttribLocation(i,"aVertexColour")},uniformLocations:{projectionMatrix:n.getUniformLocation(i,"uProjectionMatrix"),modelViewMatrix:n.getUniformLocation(i,"uModelViewMatrix"),normalMatrix:n.getUniformLocation(i,"uNormalMatrix")}},s=j(n,"\nattribute vec4 aVertexPosition;\n// attribute vec3 aVertexNormal;\nattribute vec4 aVertexColour;\n\n// uniform mat4 uNormalMatrix;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying lowp vec4 vColour;\n// varying highp vec3 vLighting;\n\nvoid main() {\n\tgl_Position = (uProjectionMatrix * uModelViewMatrix * aVertexPosition) - vec4(0.0, 0.0, 0.00048828125, 0.0);\n\tvColour = aVertexColour;\n}\n","\nvarying lowp vec4 vColour;\n// varying highp vec3 vLighting;\n\nvoid main() {\n\tgl_FragColor = vColour;\n}\n");if(null===s)return void console.log("iniShaderProgram() returned null");const a=s,l={program:a,attribLocations:{vertexPosition:n.getAttribLocation(a,"aVertexPosition"),vertexNormal:null,vertexColour:n.getAttribLocation(a,"aVertexColour")},uniformLocations:{projectionMatrix:n.getUniformLocation(a,"uProjectionMatrix"),modelViewMatrix:n.getUniformLocation(a,"uModelViewMatrix"),normalMatrix:null}};A=new g(n),q(n,o,l),H()}(),window.index=c})();